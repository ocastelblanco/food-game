window.onload=function(){function preload(){game.load.spritesheet("player","assets/img/hamb_spritesheet_70x70.png",70,70);for(var nombre,i=1;i<8;i++)nombre="p"+i,game.load.image(nombre,"assets/img/"+nombre+".png"),objetivos.push(nombre)}function create(){game.physics.startSystem(Phaser.Physics.ARCADE),player=game.add.sprite(game.world.width/2,game.world.height*(2/3),"player"),game.physics.arcade.enable(player),player.body.collideWorldBounds=!0,cursors=game.input.keyboard.createCursorKeys(),insumos=game.add.group(),insumos.enableBody=!0,conteo=-1,cuenta(),game.time.events.add(Phaser.Timer.SECOND*densidad,cuenta,this).loop=!0}function update(){game.physics.arcade.overlap(player,insumos,chocaInsumo,null,this);player.body.velocity.x=0,cursors.left.isDown?cursors.left.duration<1e3?player.body.velocity.x=-game.world.width/(grid/(.008*cursors.left.duration)):player.body.velocity.x=-game.world.width/(grid/8):cursors.right.isDown&&(cursors.right.duration<1e3?player.body.velocity.x=game.world.width/(grid/(.008*cursors.right.duration)):player.body.velocity.x=game.world.width/(grid/8))}function chocaInsumo(player,insumo){insumo.body.overlapY<-35&&insumo.kill()}function cuenta(){conteo++;var num;num=conteo>=6?7:conteo+1;for(var i=1;i<8;i++)for(var g=0;g<num;g++){var tipoInsumo=objetivos[Math.floor(Math.random()*objetivos.length)],pos=Math.floor(Math.random()*grid)/grid;insumo=insumos.create(game.world.width*pos,-spriteSize*i*4,tipoInsumo),insumo.body.gravity.y=spriteSize*(conteo+1)}}var player,cursors,insumos,conteo,insumo,game=new Phaser.Game(800,600,Phaser.AUTO,"game",{preload:preload,create:create,update:update}),grid=16,spriteSize=70,densidad=7,objetivos=[]};